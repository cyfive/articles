# Автоматизация: для чего нужна и какую выгоду дает

## Введение

Основной задачей автоматизации является устранение повседневных, рутинных операций, высвобождение времени сотрудников для выполнения других задач. Автоматизация может достигаться разными методами и инструментами, в нашем случае в качестве основного стека технологий для автоматизации я предлагаю использовать следующий инструментарий:

- Puppet - для управления конфигурациями;
- Puppet Bolt - для автоматизации различных операций требующих запуска на большом количестве хостов;
- Отдельные скрипты работающие как самостоятельно, там и в составе первых двух инструментов;

В качестве языков для написания скриптов автоматизации предлагается использовать:

- Puppet DSL - для управления конфигурациями с помощью Puppet;
- shell скрипты - для операций на unix прдобных ОС;
- powershell - для операций на Windows;
- Python - для скриптов требующих продвинутой бизнес логики;

## Автоматизация или управление конфигурациями

Управление конфигурациями можно рассматривать как частный случай автоматизации. Для управления конфигурациями характерны следующие аспекты:

- как правило используется декларативное описание инфраструктуры, мы описываем желаемое состояние системы, а система управления конфигурациями приводит целевую систему к описанному состоянию;
- система управления постоянно следит за изменениями как на целевой системе, так и в системе управления конфигурациями и приводит целевую систему к описанному состоянию;

Стоит учитывать, что автоматизация в классическом понимании (например скриптами) и управление конфигурациями не заменяют, а **дополняют** друг друга. Это вызвано тем, что есть ряд задач не выполнимых (или трудновыполнимых) с помощью систем управления конфигурациями.

## Плюсы от автоматизации

Основные плюсы автоматизации:

1. идентичность конфигураций, все системы настраиваются по единому образцу, имеют определенный состав ПО и настроек;
2. сокращение времени ввода в эксплуатацию новых виртуальных машин, серверов и оборудования;
3. радикальное снижение трудозатрат на массовые операции на инфраструктуре (например, смена сервера Zabbix на новый заняла 10 минут на более чем 200 хостов, при этом изменение было внесено в одну строку в puppet);
4. более ускоренный ввод в строй новых сотрудников, достаточно изучить конфигурацию puppet и будет понимание того, как настроена инфраструктура;

## Минусы от автоматизации

Основные минусы:

1. чрезмерная автоматизация приводит к тому, то люди теряют знания о вносимых изменениях, и со стороны это начинает выглядеть как черная магия;
2. автоматизация несовместима с настройками вручную, часто есть желание быстро поправить на сервере руками, но этого делать нельзя, только через средства автоматизации;
3. внедрение автоматизации долгий процесс и выигрыш от ее внедрения проявляется по мере полного охвата инфраструктуры;

## Инфраструктура как код (IaaC)

Инфраструктура как код (IaaC) - это подход к управлению инфраструктурой с помощью средств автоматизации и использованием технологий и подходов разработки ПО. В общем случае описание инфраструктуры хранится в системе контроля версий и при изменениях запускается доставка изменений на управляемые хосты.

Чаще всего применяются следующие технологии и методологии:

1. версионирование кода (скриптов) с использованием систем контроля версий (в нашем случае git);
2. покрытие тестами кода (скриптов);
3. ревью кода (скриптов);
4. применение подхода CI/CD
5. использование методологий разработки (канбан, скрам и т.п.).

В совокупности данный подход дополнительно позволяет решить следующие вопросы:

1. быстрый откат изменений;
2. установление авторства изменений;
3. прозрачность внесенных изменений;
4. повышение качества вносимых изменений;
5. в случае применения методологий разработки - предсказуемые сроки выполнения измененй в ираструктуре;